var kt=t=>{throw TypeError(t)};var jt=(t,e,a)=>e.has(t)||kt("Cannot "+a);var lt=(t,e,a)=>(jt(t,e,"read from private field"),a?a.call(t):e.get(t)),dt=(t,e,a)=>e.has(t)?kt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ft=(t,e,a,r)=>(jt(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a);import{t as M,a as g,d as at,c as At}from"../chunks/TUGCtxw5.js";import{aH as ce,a2 as Gt,aF as Vt,a4 as le,ar as de,h as Pt,aa as nt,aL as fe,j as n,D as ue,aK as ve,p as me,aJ as pe,a0 as ye,s as S,f as V,t as K,a as be,a5 as k,$ as he,c as H,aM as ge,r as P}from"../chunks/tsiOC5Vy.js";import{o as _e,d as xe,e as we,s as X}from"../chunks/Bq6IX5rm.js";import{i as Q}from"../chunks/BULNjMJ0.js";import{e as rt,i as zt}from"../chunks/YHobP3Ph.js";import{h as ke}from"../chunks/D-iJJf3f.js";import{r as je,a as Lt,s as St}from"../chunks/CEDXFmQI.js";import{p as Ae,a as ht}from"../chunks/yZA4Hecw.js";import{i as Pe,a as ze,b as Le,c as Se}from"../chunks/DPuyXcJU.js";function Et(t,e,a){ce(()=>{var r=Gt(()=>e(t,a==null?void 0:a())||{});if(a&&(r!=null&&r.update)){var s=!1,m={};Vt(()=>{var u=a();le(u),s&&de(m,u)&&(m=u,r.update(u))}),s=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Xt(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=Xt(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Ee(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=Xt(t))&&(r&&(r+=" "),r+=e);return r}function Me(t){return typeof t=="object"?Ee(t):t??""}function We(t,e,a){var r=t.__className,s=Ue(e,a);Pt&&t.className===s?t.__className=s:(r!==s||Pt&&t.className!==s)&&(t.className=s,t.__className=s)}function Ue(t,e){return(t??"")+(" "+e)}function F(t,e,a){if(a){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function He(t){nt(t,t.v+1)}function Ne(t){let e=0,a=ue(0),r;return()=>{fe()&&(n(a),Vt(()=>(e===0&&(r=Gt(()=>t(()=>He(a)))),e+=1,()=>{ve().then(()=>{e-=1,e===0&&(r==null||r(),r=void 0)})})))}}var Z,$;class Te{constructor(e,a){dt(this,Z);dt(this,$);ft(this,Z,e),ft(this,$,Ne(a))}get current(){return lt(this,$).call(this),lt(this,Z).call(this)}}Z=new WeakMap,$=new WeakMap;const Ce=/\(.+\)/;class Fe extends Te{constructor(e,a){let r=Ce.test(e)?e:`(${e})`;const s=window.matchMedia(r);super(()=>s.matches,m=>_e(s,"change",m))}}function De(t){const e=JSON.parse(t);return e.data&&(e.data=Le(e.data,Se.decoders)),e}function ut(t){return HTMLElement.prototype.cloneNode.call(t)}function vt(t,e=()=>{}){const a=async({action:s,result:m,reset:u=!0,invalidateAll:b=!0})=>{m.type==="success"&&(u&&HTMLFormElement.prototype.reset.call(t),b&&await Pe()),(location.origin+location.pathname===s.origin+s.pathname||m.type==="redirect"||m.type==="error")&&ze(m)};async function r(s){var C,R,U,O,f;if(((C=s.submitter)!=null&&C.hasAttribute("formmethod")?s.submitter.formMethod:ut(t).method)!=="post")return;s.preventDefault();const u=new URL((R=s.submitter)!=null&&R.hasAttribute("formaction")?s.submitter.formAction:ut(t).action),b=(U=s.submitter)!=null&&U.hasAttribute("formenctype")?s.submitter.formEnctype:ut(t).enctype,x=new FormData(t),N=(O=s.submitter)==null?void 0:O.getAttribute("name");N&&x.append(N,((f=s.submitter)==null?void 0:f.getAttribute("value"))??"");const D=new AbortController;let T=!1;const z=await e({action:u,cancel:()=>T=!0,controller:D,formData:x,formElement:t,submitter:s.submitter})??a;if(T)return;let _;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});b!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(b)?b:"application/x-www-form-urlencoded");const i=b==="multipart/form-data"?x:new URLSearchParams(x),c=await fetch(u,{method:"POST",headers:l,cache:"no-store",body:i,signal:D.signal});_=De(await c.text()),_.type==="error"&&(_.status=c.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;_={type:"error",error:l}}z({action:u,formData:x,formElement:t,update:l=>a({action:u,result:_,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:_})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",r),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",r)}}}var Mt="mz3PUW_p",Wt=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ut=3500,Ht=.5,Nt=150,Tt="mix",Ct=12,Ft="",Dt=!0,Ot=800,qt=1600;function mt(t,e={}){let{colors:a=Wt,duration:r=Ut,force:s=Ht,particleCount:m=Nt,particleShape:u=Tt,particleSize:b=Ct,particleClass:x=Ft,destroyAfterDone:N=Dt,stageHeight:D=Ot,stageWidth:T=qt}=e;(function(f){if(document.querySelector("style[data-neoconfetti]"))return;const l=pt("style");l.dataset.neoconfetti="",l.textContent=f,yt(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",D+"px");let W=[],z=[];const _=()=>Y(E()*(Re-1)),C=(f,l)=>u!=="rectangles"&&(f==="circles"||Be(l));function R(f,l){const i=_(),c=C(u,i),o=(y,v)=>f.style.setProperty(y,v+"");o("--xlp",bt(st(Bt(l,90)-180),0,180,-T/2,T/2)+"px"),o("--dc",r-Y(1e3*E())+"ms");const d=E()<qe?G(E()*Je,2):0;o("--x1",d),o("--x2",-1*d),o("--x3",d),o("--x4",G(st(bt(st(Bt(l,90)-180),0,180,-1,1)),4)),o("--y1",G(E()*Kt,4)),o("--y2",G(E()*s*(Yt()?1:-1),4)),o("--y3",Kt),o("--y4",G(Ke(bt(st(l-180),0,180,s,-s),0),4)),o("--w",(c?b:Y(4*E())+b/2)+"px"),o("--h",(c?b:Y(2*E())+b)+"px");const p=i.toString(2).padStart(3,"0").split("");o("--hr",p.map(y=>+y/2+"").join(" ")),o("--r",p.join(" ")),o("--rd",G(E()*(Oe-Jt)+Jt)+"ms"),o("--br",c?"50%":0)}let U;function O(){t.innerHTML="",clearTimeout(U),W=Rt(m,a),z=function(f,l=[],i){const c=[];for(const{color:o}of l){const d=pt("div");d.className=`${Mt} ${i}`,d.style.setProperty("--bgc",o);const p=pt("div");yt(d,p),yt(f,d),c.push(d)}return c}(t,W,x);for(const[f,l]of It(z))R(l,W[+f].degree);U=setTimeout(()=>{N&&(t.innerHTML="")},r)}return O(),{update(f){const l=f.particleCount??Nt,i=f.particleShape??Tt,c=f.particleSize??Ct,o=f.particleClass??Ft,d=f.colors??Wt,p=f.stageHeight??Ot,y=f.duration??Ut,v=f.force??Ht,j=f.stageWidth??qt,L=f.destroyAfterDone??Dt;W=Rt(l,d);let h=!1;if(l===m){z=Array.from(t.querySelectorAll(`.${Mt}`));for(const[w,{color:q}]of It(W)){const J=z[+w];JSON.stringify(a)!==JSON.stringify(d)&&J.style.setProperty("--bgc",q),i!==u&&J.style.setProperty("--br",C(i,_())?"50%":"0"),o!==x&&(x&&J.classList.remove(x),o&&J.classList.add(o))}}else h=!0;N&&!L&&clearTimeout(U),t.style.setProperty("--sh",p+"px"),r=y,a=d,s=v,m=l,u=i,b=c,x=o,N=L,D=p,T=j,h&&O()},destroy(){t.innerHTML="",clearTimeout(U)}}}var Jt=200,Oe=800,qe=.1,Je=.3,Kt=.5,st=Math.abs,E=Math.random,Y=Math.round,Ke=Math.max,pt=t=>document.createElement(t),yt=(t,e)=>t.appendChild(e),Rt=(t,e)=>Array.from({length:t},(a,r)=>({color:e[r%e.length],degree:360*r/t})),G=(t,e=2)=>Y((t+Number.EPSILON)*10**e)/10**e,bt=(t,e,a,r,s)=>(t-e)*(s-r)/(a-e)+r,Bt=(t,e)=>t+e>360?t+e-360:t+e,Yt=()=>E()>.5,It=Object.entries,Re=6,Be=t=>t!==1&&Yt();function Qt(t,e,a){var s;t.preventDefault();const r=t.target.getAttribute("data-key");r==="backspace"?(nt(e,ht(n(e).slice(0,-1))),(s=a())!=null&&s.badGuess&&a(a().badGuess=!1,!0)):n(e).length<5&&nt(e,n(e)+r)}var Ie=M('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Qe=M('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ge=M('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),Ve=M('<p class="svelte-1pg2j5l"> </p>'),Xe=M('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ye=M('<button formaction="?/update" name="key"> </button>'),Ze=M('<div class="row svelte-1pg2j5l"></div>'),$e=M('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),ta=M('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),ea=M('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ua(t,e){me(e,!0);let a=Ae(e,"form",15);const r=new Fe("(prefers-reduced-motion: reduce)");let s=k(()=>e.data.answers.at(-1)==="xxxxx"),m=k(()=>n(s)?-1:e.data.answers.length),u=pe(ht(e.data.guesses[n(m)]||""));ye(()=>{nt(u,ht(e.data.guesses[n(m)]||""))});let b=k(()=>n(u).length===5);const x=k(()=>{let i={},c={};return e.data.answers.forEach((o,d)=>{const p=e.data.guesses[d];for(let y=0;y<5;y+=1){const v=p[y];o[y]==="x"?(i[v]="exact",c[v]="correct"):i[v]||(i[v]=o[y]==="c"?"close":"missing",c[v]=o[y]==="c"?"present":"absent")}}),{classnames:i,description:c}}),N=k(()=>n(x).classnames),D=k(()=>n(x).description);function T(i){var c;i.metaKey||i.key==="Enter"&&!n(b)||(c=document.querySelector(`[data-key="${i.key}" i]`))==null||c.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var W=ea();we("keydown",ge,T),ke(i=>{var c=Ie();he.title="Sverdle",g(i,c)});var z=S(V(W),2),_=S(H(z),2);rt(_,20,()=>Array.from(Array(6).keys()),i=>i,(i,c)=>{var o=Ge();const d=k(()=>c===n(m));var p=V(o),y=H(p);P(p);var v=S(p,2);rt(v,20,()=>Array.from(Array(5).keys()),j=>j,(j,L)=>{var h=Qe();const w=k(()=>n(d)?n(u):e.data.guesses[c]),q=k(()=>{var A;return(A=e.data.answers[c])==null?void 0:A[L]}),J=k(()=>{var A;return((A=n(w))==null?void 0:A[L])??""}),Zt=k(()=>n(d)&&L===n(w).length),gt=k(()=>n(q)==="x"),_t=k(()=>n(q)==="c"),xt=k(()=>n(q)==="_");var wt=H(h),it=S(wt),$t=H(it);{var te=A=>{var tt=at("(correct)");g(A,tt)},ee=A=>{var tt=At(),ae=V(tt);{var re=B=>{var et=at("(present)");g(B,et)},se=B=>{var et=At(),ne=V(et);{var ie=I=>{var ct=at("(absent)");g(I,ct)},oe=I=>{var ct=at("empty");g(I,ct)};Q(ne,I=>{n(xt)?I(ie):I(oe,!1)},!0)}g(B,et)};Q(ae,B=>{n(_t)?B(re):B(se,!1)},!0)}g(A,tt)};Q($t,A=>{n(gt)?A(te):A(ee,!1)})}P(it);var ot=S(it,2);je(ot),P(h),K(()=>{F(h,"exact",n(gt)),F(h,"close",n(_t)),F(h,"missing",n(xt)),F(h,"selected",n(Zt)),X(wt,`${n(J)??""} `),ot.disabled=!n(d),Lt(ot,n(J))}),g(j,h)}),P(v),K(()=>{X(y,`Row ${c+1}`),F(v,"current",n(d))}),g(i,o)}),P(_);var C=S(_,2),R=H(C);{var U=i=>{var c=Xe(),o=V(c);{var d=v=>{var j=Ve(),L=H(j);P(j),K(()=>X(L,`the answer was "${e.data.answer??""}"`)),g(v,j)};Q(o,v=>{!n(s)&&e.data.answer&&v(d)})}var p=S(o,2),y=H(p);P(p),K(()=>X(y,`${(n(s)?"you won :)":"game over :(")??""} play again?`)),g(i,c)},O=i=>{var c=$e(),o=H(c),d=S(o,2);d.__click=[Qt,u,a];var p=S(d,2);rt(p,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],zt,(y,v)=>{var j=Ze();rt(j,21,()=>v,zt,(L,h)=>{var w=Ye();w.__click=[Qt,u,a];var q=H(w,!0);P(w),K(()=>{St(w,"data-key",n(h)),We(w,Me(n(N)[n(h)]),"svelte-1pg2j5l"),w.disabled=n(b),Lt(w,n(h)),St(w,"aria-label",`${n(h)??""} ${n(D)[n(h)]||""}`),X(q,n(h))}),g(L,w)}),P(j),g(y,j)}),P(c),K(()=>{o.disabled=!n(b),F(o,"selected",n(b))}),g(i,c)};Q(R,i=>{n(s)||e.data.answers.length>=6?i(U):i(O,!1)})}P(C),P(z),Et(z,(i,c)=>vt==null?void 0:vt(i,c),()=>()=>({update:i})=>{i({reset:!1})});var f=S(z,2);{var l=i=>{var c=ta();Et(c,(o,d)=>mt==null?void 0:mt(o,d),()=>({particleCount:r.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(i,c)};Q(f,i=>{n(s)&&i(l)})}K(()=>{var i;F(_,"playing",!n(s)),F(_,"bad-guess",(i=a())==null?void 0:i.badGuess)}),g(t,W),be()}xe(["click"]);export{ua as component};
